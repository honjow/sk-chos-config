#!/bin/bash

VENDOR=$(cat /sys/devices/virtual/dmi/id/sys_vendor)

echo "Auto set shell"
/usr/bin/sk-auto-set-shell

echo "reset Internal screen"
sed -i '/Internal screen/d' "${HOME}/.config/gamescope/modes.cfg"

# check gpdconfig is installed
if [[ -f /usr/bin/gpdconfig && "$VENDOR" == "GPD" ]]; then
    gpdconfig l41=SYSRQ r41=PAUSE
fi

# pacman -Q , check install gnome-shell-extension-screen-autorotate
if [[ $(pacman -Q | grep gnome-shell-extension-screen-autorotate) ]]; then
    echo "gnome-shell-extension-screen-autorotate is installed"
    # check gsettings is installed
    if [[ -f /usr/bin/gsettings ]]; then
        if [[ -f /etc/sk-chos/screen-rotate ]]; then
            source /etc/sk-chos/screen-rotate
            gsettings set org.gnome.shell.extensions.screen-rotate orientation-offset "${ROTATE_OFFSET}"
        fi
    fi
fi
